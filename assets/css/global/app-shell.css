/* 색상·길이·폰트는 theme.css 변수만 사용 (var(--xxx)) */
.panel {
  box-sizing: border-box;
  border: 1px solid var(--app-border);
  border-radius: var(--panel-border-radius);
  padding: var(--panel-padding);
  max-height: var(--app-content-available-h);
  min-height: var(--app-content-available-h);
  overflow: auto;
}

.panel-title {
  font-weight: var(--panel-title-font-weight);
  color: var(--panel-title-color);
  margin-bottom: var(--panel-title-margin-bottom);
}

.panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--panel-header-gap);
  flex-shrink: 0;
  flex-wrap: wrap;
}

.panel-header-right {
  display: flex;
  align-items: center;
  gap: var(--panel-header-right-gap);
  flex-wrap: wrap;
  min-width: 0;
}

.log-box {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: var(--log-box-font-size);
  background: var(--bg-1);
  color: var(--app-text);
  border: 1px solid var(--app-border);
  border-radius: var(--log-box-border-radius);
  padding: var(--log-box-padding);
  height: var(--log-box-height);
  overflow: auto;
  white-space: pre-wrap;
  word-break: break-word;
  user-select: text;
  -webkit-user-select: text;
}

.sel-table-wrap {
  height: var(--sel-table-height);
  overflow: auto;
  background: var(--bg-1);
  border: 1px solid var(--app-border);
  border-radius: var(--panel-border-radius);
  color: var(--app-text);
}
.sel-table-wrap .table {
  color: var(--app-text);
  border-color: var(--app-border);
  margin-bottom: 0;
}
.sel-table-wrap .table th,
.sel-table-wrap .table td {
  border-color: var(--app-border);
  padding: var(--sel-table-cell-padding);
  vertical-align: middle;
}
.sel-table-wrap .table thead th,
.sel-table-wrap .table .table-light th {
  background: var(--tile) !important;
  color: var(--text) !important;
  font-weight: var(--sel-table-th-font-weight);
  border-bottom: 1px solid var(--app-border);
}
.sel-table-wrap .table tbody tr:nth-of-type(even) {
  background: var(--overlay-w-08);
}
.sel-table-wrap .table tbody tr:hover {
  background: var(--overlay-w-0d);
}
.sel-table-wrap .table .text-muted {
  color: var(--muted) !important;
}

.panel .btn-primary,
.panel .send-message-btn,
.panel-block .btn-primary,
.panel-block .send-message-btn {
  background: var(--bg-2);
  border: 1px solid var(--bg-2);
  color: var(--app-text);
  border-radius: var(--panel-btn-border-radius);
  padding: var(--panel-btn-padding);
  font-weight: var(--panel-btn-font-weight);
  font-size: var(--panel-btn-font-size);
  outline: none;
  box-shadow: none;
  min-width: var(--panel-btn-min-width);
  margin-right: var(--panel-btn-margin-right);
}
.panel .btn-primary:hover,
.panel .send-message-btn:hover,
.panel-block .btn-primary:hover,
.panel-block .send-message-btn:hover {
  background: var(--overlay-w-0d);
  border-color: var(--bg-2);
  color: var(--app-text);
}

.panel input.form-control,
.panel .send-data-syscmd,
.panel select.form-select,
.panel-block input.form-control,
.panel-block .send-data-syscmd,
.panel-block select.form-select {
  background: var(--bg-1);
  color: var(--app-text);
  border: 1px solid var(--bg-2);
  border-radius: var(--panel-input-border-radius);
  padding: var(--panel-input-padding);
  line-height: 1.2;
  box-sizing: border-box;
  /* input/select 높이 통일 (padding-y 0.4rem 기준) */
  height: calc(1.2em + 0.8rem + 2px);
  min-width: var(--panel-input-min-width);
  margin-right: var(--panel-btn-margin-right);
}

/* select는 기본 화살표 영역 때문에 padding-right 보정 */
.panel select.form-select,
.panel-block select.form-select {
  padding-right: calc(var(--space-3) + 1.25rem);
}

/* Bootstrap sm 변형에서도 동일 높이 유지 */
.panel input.form-control.form-control-sm,
.panel select.form-select.form-select-sm,
.panel-block input.form-control.form-control-sm,
.panel-block select.form-select.form-select-sm {
  height: calc(1.2em + 0.8rem + 2px);
}
.panel input.form-control::placeholder,
.panel .send-data-syscmd::placeholder,
.panel-block input.form-control::placeholder,
.panel-block .send-data-syscmd::placeholder {
  color: var(--muted);
}
.panel input.form-control:focus,
.panel .send-data-syscmd:focus,
.panel select.form-select:focus,
.panel-block input.form-control:focus,
.panel-block .send-data-syscmd:focus,
.panel-block select.form-select:focus {
  border-color: var(--accent-border);
  outline: none;
  box-shadow: 0 0 0 2px var(--accent-bg-12);
}

.panel-block {
  background: var(--panel-block-bg);
  gap: var(--panel-block-gap);
  padding: var(--panel-block-padding);
}
.panel-block:last-child {
  margin-bottom: 0;
}
.panel-block-title {
  font-size: var(--panel-block-title-font-size);
  font-weight: var(--panel-block-title-font-weight);
  color: var(--panel-block-title-color);
  margin-bottom: var(--panel-block-title-margin-bottom);
}
.panel-block .panel-block-title.panel-block-title--category.d-flex {
  width: 100%;
  gap: var(--space-3);
}
.panel-block .panel-block-title.panel-block-title--category.d-flex > span {
  flex: 1 1 auto;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.panel-block .panel-block-title.panel-block-title--category.d-flex > .form-check-input {
  flex: 0 0 auto;
  /* Bootstrap form-check-input 기본 float/margin 보정 (타이틀 안에서는 겹침 방지) */
  float: none;
  position: static;
  margin: 0 !important;
}

/* checkbox 컬러(테마 accent) */
.panel-block .form-check-input[type="checkbox"] {
  accent-color: var(--accent);
  cursor: pointer;
}
.panel-block .form-check-input[type="checkbox"]:focus {
  outline: none;
  box-shadow: 0 0 0 2px var(--accent-bg-12);
}
.panel-block .panel-block-title.mb-1 {
  margin-bottom: var(--panel-block-title-mb1-margin-bottom);
}
.panel-block .panel-block-title + .d-flex,
.panel-block .panel-block-title + .table-responsive,
.panel-block .panel-block-title + .log-box {
  margin-top: 0;
}

/* panel-block-title 하위 항목 왼쪽 패딩(들여쓰기) */
.panel-block .panel-block-title ~ * {
  padding-left: var(--space-3);
}
/* panel-block-title 다음 요소 오른쪽 정렬 (제목은 왼쪽 유지) */
.panel-block:has(.panel-block-title) {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}
.panel-block:has(.panel-block-title) .panel-block-title {
  /* 타이틀은 가로폭을 확보해야 내부(checkbox 등) 정렬이 정상 동작 */
  align-self: stretch;
  text-align: left;
}
.panel-block .panel-block-title + .form-control {
  align-self: flex-end;
}
.panel-block .d-flex + .panel-block-title,
.panel-block .table-responsive + .panel-block-title {
  margin-top: var(--panel-block-title-margin-top);
}

.app-root {
  height: 100vh;
  max-height: 100vh;
  display: grid;
  grid-template-rows: var(--app-top-h) minmax(0, 1fr) var(--app-status-h);
  background: var(--app-bg);
  color: var(--app-text);
  overflow: hidden;
}

.app-topbar {
  box-sizing: border-box;
  height: var(--app-top-h);
  min-height: var(--app-top-h);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--app-topbar-padding);
  background: var(--app-topbar-bg);
  border-bottom: 1px solid var(--app-border);
  overflow: hidden;
  flex-shrink: 0;
}

.app-top-left {
  display: flex;
  align-items: center;
  gap: var(--app-top-left-gap);
  min-width: 0;
  overflow: hidden;
  max-width: 100%;
}

.app-top-right {
  margin-left: auto;
  display: flex;
  justify-content: flex-end;
}

.app-icon-btn {
  border: 1px solid var(--app-border);
  background: var(--overlay-w-08);
  color: var(--app-text);
  border-radius: var(--app-icon-btn-border-radius);
  width: var(--app-icon-btn-width);
  height: var(--app-icon-btn-height);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.app-icon-btn:hover { background: var(--overlay-w-0f); }

.app-title {
  display: inline-flex;
  align-items: center;
  gap: var(--app-title-gap);
  min-width: 0;
  overflow: hidden;
  max-width: 100%;
}

.app-logo {
  height: var(--app-logo-height);
  max-height: var(--app-logo-height);
  width: auto;
  max-width: var(--app-logo-max-width);
  display: inline-block;
  flex: 0 0 auto;
  object-fit: contain;
  vertical-align: middle;
}

.app-title-text {
  font-weight: var(--app-title-text-font-weight);
  letter-spacing: var(--app-title-text-letter-spacing);
}

.app-title-page {
  color: var(--app-text);
  font-weight: var(--app-title-page-font-weight);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: var(--app-title-page-max-width);
}

.app-topmenu {
  display: none;
  align-items: center;
  gap: var(--app-topmenu-gap);
  min-width: 0;
  overflow-x: auto;
}

.app-topmenu-item {
  color: var(--text-85);
  padding: var(--app-topmenu-item-padding);
  border-radius: var(--app-topmenu-item-border-radius);
  border: 1px solid var(--app-topmenu-item-border);
}

.app-topmenu-item:hover {
  border-color: var(--app-border);
  background: var(--overlay-w-0a);
  color: var(--app-text);
}

.app-topmenu-item.active {
  /* border-color: var(--accent-border);
  background: var(--accent-bg-12); */
  color: var(--app-text);
}

.app-topmenu-group {
  display: inline-flex;
  align-items: center;
  gap: var(--app-topmenu-group-gap);
}

/* Sub-items appear to the left of the section (main item) */
.app-topmenu-group .app-topmenu-item { order: 2; }
.app-topmenu-group .app-topmenu-sub { order: 1; }

.app-topmenu-sub {
  display: inline-flex;
  align-items: center;
  gap: var(--app-topmenu-sub-gap);
  padding-right: var(--app-topmenu-sub-padding-left);
  border-right: 1px solid var(--app-border);
}

.app-topmenu-sub-item {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1, 0.25rem);
  color: var(--app-text);
  padding: var(--app-topmenu-sub-item-padding);
  border-radius: var(--app-topmenu-sub-item-border-radius);
  border: 1px solid var(--app-topmenu-sub-item-border);
  font-size: var(--app-topmenu-sub-item-font-size);
  text-decoration: none;
}

.app-topmenu-sub-item:hover {
  border-color: var(--app-border);
  background: var(--overlay-w-0a);
  color: var(--app-text);
}

.app-topmenu-sub-item.active {
  /* border-color: var(--accent-border);
  background: var(--accent-bg-12); */
  color: var(--app-accent);
}

.app-topmenu-sub-sep {
  display: block;
  width: 1px;
  height: 1.25rem;
  margin: 0 var(--space-2);
  background: var(--app-border);
}

.app-shell {
  display: grid;
  grid-template-columns: var(--app-sidebar-w) 1fr;
  min-height: 0;
  overflow: hidden;
}

.app-sidebar {
  background: linear-gradient(180deg, var(--app-panel) 0%, var(--app-panel-2) 100%);
  border-right: 1px solid var(--app-border);
  padding: var(--app-sidebar-padding);
  display: flex;
  flex-direction: column;
  gap: var(--app-sidebar-gap);
}

.app-brand {
  display: flex;
  align-items: center;
  gap: var(--app-brand-gap);
  padding: var(--app-brand-padding);
}

.app-brand-mark {
  width: var(--app-brand-mark-size);
  height: var(--app-brand-mark-size);
  border-radius: var(--app-brand-mark-radius);
  background: var(--app-accent);
  box-shadow: var(--app-brand-mark-glow);
}

.app-brand-text {
  font-weight: var(--app-brand-text-font-weight);
  letter-spacing: var(--app-brand-text-letter-spacing);
}

.app-nav {
  display: flex;
  flex-direction: column;
  gap: var(--app-nav-gap);
}

.app-nav-item {
  display: flex;
  align-items: center;
  font-size: var(--app-nav-item-font-size);
  gap: var(--app-nav-item-gap);
  color: var(--app-text);
  padding: var(--app-nav-item-padding);
  border: 1px solid transparent;
  border-right-color: var(--app-nav-item-border);
  background: var(--app-nav-item-bg);
}

.app-nav-item:hover {
  border-right-color: var(--app-border);
  background: var(--overlay-w-0a);
  color: var(--app-text);
}

.app-nav-item.active {
  border-right-color: var(--accent);
  /* background: var(--app-nav-item-active-bg); */
}

.app-nav-item.active .app-nav-ico,
.app-nav-item.active .app-nav-label {
  color: var(--app-nav-item-active-text);
  font-weight: var(--app-nav-item-active-font-weight);
}

.app-nav-ico {
  width: var(--app-nav-ico-width);
  text-align: center;
  /* 아이콘 색상은 텍스트 색상과 동일하게 */
  color: currentColor;
}

.app-nav-label { font-weight: var(--app-nav-label-font-weight); }

.app-nav-group {
  display: flex;
  flex-direction: column;
  gap: var(--app-nav-group-gap);
}

/* Only the active group shows sub-items; others stay hidden (fixes stale sidebar when switching to Operation etc.) */
.app-nav-group:not(.active) .app-nav-sub {
  display: none !important;
}

.app-nav-sub {
  display: flex;
  flex-direction: column;
  gap: var(--app-nav-sub-gap);
  padding-left: var(--app-nav-sub-padding-left);
  margin-top: var(--app-nav-sub-margin-top);
  border-left: 2px solid var(--app-border);
  margin-left: var(--app-nav-sub-margin-left);
}

.app-nav-sub-item {
  display: flex;
  align-items: center;
  gap: var(--space-1, 0.25rem);
  padding: var(--app-nav-sub-item-padding);
  font-size: var(--app-nav-sub-item-font-size);
  color: var(--app-muted);
  text-decoration: none;
  border-radius: var(--app-nav-sub-item-border-radius);
  border: 1px solid var(--app-nav-sub-item-border);
}

.app-nav-sub-item .app-sub-ico,
.app-topmenu-sub-item .app-sub-ico {
  flex-shrink: 0;
  font-style: normal;
  opacity: 0.85;
}

.app-nav-sub-item:hover {
  color: var(--app-text);
  background: var(--overlay-w-0a);
  border-color: var(--app-border);
}

.app-nav-sub-item.active {
  color: var(--app-accent);
  font-weight: var(--app-nav-sub-item-active-font-weight);
  /* border-color: var(--accent-border);
  background: var(--accent-bg-12); */
}

.app-sidebar-spacer { flex: 1; }

.app-sidebar-footer {
  border-top: 1px solid var(--app-border);
  padding-top: var(--app-sidebar-footer-padding-top);
}
.app-sidebar-footer .app-nav-label {
  color: var(--app-border);
}
.app-sidebar-footer .app-nav-ico {
  width: var(--app-sidebar-footer-ico-width);
  text-align: center;
  color: var(--app-border);
}
.app-content {
  padding: var(--app-content-padding);
  overflow: hidden;
  min-width: 0;
  min-height: 0;
  --content-available-h: var(--app-content-available-h);
}

.app-statusbar {
  box-sizing: border-box;
  height: var(--app-status-h);
  min-height: var(--app-status-h);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--app-statusbar-gap);
  padding: var(--app-statusbar-padding);
  border-top: 1px solid var(--app-border);
  background: var(--app-statusbar-bg);
  color: var(--app-muted);
  font-size: var(--app-statusbar-font-size);
  white-space: nowrap;
  overflow: hidden;
}

.app-statusbar-items {
  display: flex;
  align-items: center;
  gap: var(--app-statusbar-gap);
  min-width: 0;
  overflow: hidden;
}

.app-statusbar-right {
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

.app-status-item {
  display: inline-flex;
  gap: var(--app-status-item-gap);
  align-items: center;
}

.app-status-label { color: var(--app-text); }
.app-status-value { color: var(--app-text); font-weight: var(--app-status-value-font-weight); }

body.sidebar-collapsed .app-shell {
  grid-template-columns: 0 1fr;
}

body.sidebar-collapsed .app-sidebar {
  width: 0;
  padding: 0;
  border-right: 0;
  overflow: hidden;
}

body.sidebar-collapsed .app-topmenu {
  display: inline-flex;
}

/* Dashboard Tabs (Selected / Log Message) — 그리드 이후 남는 영역만 사용 */
.dashboard-board-panel .dashboard-tabs-container {
  flex: 1 1 0;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  margin-top: var(--panel-block-gap);
}

.dashboard-tabs-container {
  display: flex;
  flex-direction: column;
  gap: var(--panel-block-gap);
}

.dashboard-board-panel .dashboard-tab-content.active {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  overflow: auto;
}

.dashboard-board-panel .dashboard-tab-content .panel-block {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}

.dashboard-board-panel .dashboard-tab-content .sel-table-wrap,
.dashboard-board-panel .dashboard-tab-content .log-box {
  flex: 1;
  min-height: 0;
  height: auto;
}

.dashboard-tabs-header {
  display: flex;
  gap: 0.25rem;
  border-bottom: 1px solid var(--app-border);
  padding-bottom: 0.25rem;
}

.dashboard-tab-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.375rem 0.75rem;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--app-text);
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: color 0.15s, border-color 0.15s;
  position: relative;
}

.dashboard-tab-btn:hover {
  color: var(--app-accent);
}

.dashboard-tab-btn.active {
  color: var(--app-accent);
  border-bottom-color: var(--app-accent);
}

.dashboard-tab-btn.hidden {
  opacity: 0.5;
  text-decoration: line-through;
}

.dashboard-tab-count {
  font-size: 0.75rem;
  color: var(--app-muted);
  font-weight: 600;
}

.dashboard-tab-close {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.25rem;
  height: 1.25rem;
  padding: 0;
  margin-left: 0.25rem;
  background: transparent;
  border: none;
  color: var(--app-muted);
  font-size: 1.25rem;
  line-height: 1;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.15s, color 0.15s;
}

.dashboard-tab-btn:hover .dashboard-tab-close {
  opacity: 1;
}

.dashboard-tab-close:hover {
  color: var(--app-danger);
}

.dashboard-tab-content {
  display: none;
}

.dashboard-tab-content.active {
  display: block;
}

.dashboard-tab-content.hidden {
  display: none !important;
}

.dashboard-tabs-restore {
  display: flex;
  gap: 0.25rem;
  margin-left: auto;
  align-items: center;
}

.dashboard-tab-restore-btn {
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  background: var(--bg-2);
  border: 1px solid var(--app-border);
  border-radius: 0.25rem;
  color: var(--app-text);
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.15s;
}

.dashboard-tab-restore-btn:hover {
  opacity: 1;
  background: var(--bg-1);
}

@media (max-width: 991.98px) { /* breakpoint: theme에서 --app-breakpoint-lg 등으로 분리 가능 */
  .app-content {
    overflow: auto;
    min-height: 0;
  }
  .panel {
    min-height: auto;
    max-height: none;
  }
  /* 좁은 화면에서 패널 높이가 auto가 되면 flex 남는 영역이 없어 탭 컨테이너가 0으로 줄어듦 → 최소 높이만 보장하고 나머지는 공간 채움 */
  .dashboard-board-panel .dashboard-tabs-container {
    flex: 1 1 0;
    min-height: clamp(10rem, 28vh, 18rem);
    overflow: auto;
  }
}

/* panel-block 제목 보조 (카테고리 라벨 등) */
.panel-block-title--category {
  font-size: 0.8rem;
  font-weight: 600;
  /* color: var(--app-danger); */
}
