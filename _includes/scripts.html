{% if site.footer_scripts %}
  {% for script in site.footer_scripts %}
    <script src="{{ script | relative_url }}"></script>
  {% endfor %}
{% endif %}
<script>
(function() {
  // data-icon="1F4DC,FE0E" → 해당 유니코드 문자로 렌더 (GitHub Pages 인코딩 이슈 회피)
  document.querySelectorAll('.app-nav-ico[data-icon]').forEach(function(span) {
    var hex = (span.getAttribute('data-icon') || '25B6').trim();
    var chars = hex.split(',').map(function(h) {
      var code = parseInt(h.trim(), 16);
      return isNaN(code) ? '' : String.fromCodePoint(code);
    });
    span.textContent = chars.join('');
  });

  var btn = document.getElementById('sidebar-toggle');
  var body = document.body;
  if (!btn || !body) return;
  var key = 'sidebar-collapsed';
  if (localStorage.getItem(key) === '1') {
    body.classList.add('sidebar-collapsed');
    btn.setAttribute('aria-pressed', 'true');
  }
  btn.addEventListener('click', function() {
    body.classList.toggle('sidebar-collapsed');
    var pressed = body.classList.contains('sidebar-collapsed');
    btn.setAttribute('aria-pressed', pressed ? 'true' : 'false');
    btn.setAttribute('title', pressed ? '사이드바 보기' : '사이드바 숨기기');
    localStorage.setItem(key, pressed ? '1' : '0');
  });
})();
</script>
