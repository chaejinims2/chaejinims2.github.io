---
layout: page
---
{% assign url_parts = page.url | split: "/" %}
{% if url_parts[1] == "public" %}
  {% assign section_key = url_parts[2] %}
  {% assign page_group_base = "/public/" | append: section_key | append: "/" %}
{% elsif url_parts[1] == "protected" %}
  {% assign section_key = url_parts[2] %}
  {% assign page_group_base = "/protected/" | append: section_key | append: "/" %}
{% else %}
  {% assign section_key = url_parts[1] %}
  {% assign page_group_base = "/" | append: section_key | append: "/" %}
{% endif %}
<h1 class="section-index-title">{{ page.title | default: section_key | capitalize }}</h1>
<div class="section-index-lead content-prose">
{{ content }}
</div>
{% assign group_pages = site.pages | where_exp: "item", "item.url contains page_group_base" | sort: "url" %}
<ul class="section-index-list">
  {% for p in group_pages %}
    {% if p.hide != true and p.url != page.url %}
      <li><a href="{{ p.url }}">{{ p.title }}</a></li>
    {% endif %}
  {% endfor %}
</ul>

{% if section_key == "techs" %}
  {% assign section_posts = site.posts | where: "section", "techs" %}
<section class="section-posts" aria-labelledby="tech-posts-heading">
  <div class="section-posts-header">
    <h2 id="tech-posts-heading" class="section-index-title">Latest</h2>
    <!-- <a href="{{ site.baseurl }}/admin/#/collections/posts/new" class="section-post-btn" target="_blank" rel="noopener">포스팅</a> -->
  </div>
  {% if section_posts.size > 0 %}
  <ul class="section-index-list">
    {% for post in section_posts limit: 20 %}
      <li>
        <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
        <time class="section-post-date" datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%Y-%m-%d" }}</time>
      </li>
    {% endfor %}
  </ul>
  {% endif %}
</section>
{% endif %}
